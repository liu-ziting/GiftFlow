# GiftFlow - ç¤¼ç‰©æŠ½å¥–ç®¡ç†ç³»ç»Ÿ

GiftFlow æ˜¯ä¸€ä¸ªåŸºäº Cloudflare ç”Ÿæ€ç³»ç»Ÿï¼ˆPages, Functions, D1ï¼‰å¼€å‘çš„ç¤¼ç‰©æŠ½å¥–ä¸äº¤æ¢ç®¡ç†ç³»ç»Ÿã€‚å®ƒæ”¯æŒå¤šåˆ†ç»„ç®¡ç†ã€é‚€è¯·ç æœºåˆ¶ã€ä»¥åŠç®¡ç†å‘˜å…¨å±€æ“æ§æŠ½å¥–é€»è¾‘ã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹ç‚¹

- **å¤šåˆ†ç»„ç®¡ç†**ï¼šé€šè¿‡é‚€è¯·ç å°†ç”¨æˆ·åˆ’åˆ†åˆ°ä¸åŒçš„å°ç»„ï¼Œæ”¯æŒå¤šæ´»åŠ¨å¹¶è¡Œã€‚
- **å¾ªç¯æŠ½å¥–é€»è¾‘**ï¼šé‡‡ç”¨åç§»ç®—æ³•ç¡®ä¿æŠ½å¥–ç»“æœå½¢æˆé—­ç¯ï¼ˆA -> B -> C -> Aï¼‰ï¼Œä¿è¯æ¯äººéƒ½èƒ½é€å‡ºå¹¶æ”¶åˆ°ä¸€ä»½ç¤¼ç‰©ã€‚
- **ç®¡ç†å‘˜æƒé™**ï¼šç®¡ç†å‘˜ï¼ˆAdminï¼‰æ‹¥æœ‰å…¨å±€ç®¡ç†æƒé™ï¼Œå¯ç›‘æ§å„ç»„å‚ä¸äººæ•°ã€ä¸€é”®å¼€å¯æŠ½å¥–å¹¶æŸ¥çœ‹é…å¯¹åå•ã€‚
- **éšç§ä¸å®‰å…¨**ï¼š
    - æˆå‘˜ä»…åœ¨æŠ½å¥–ç»“æŸåå¯è§è‡ªå·±çš„æ”¶ä»¶äººè¯¦ç»†ä¿¡æ¯ï¼ˆå§“åã€ç”µè¯ã€åœ°å€ï¼‰ã€‚
    - ç®¡ç†å‘˜ä»…èƒ½æŸ¥çœ‹å§“åé…å¯¹ï¼Œæ— æ³•è·å–ç”¨æˆ·ç§äººåœ°å€ï¼Œä¿æŠ¤éšç§ã€‚
- **æç®€ UI/UX**ï¼šåŸºäº Tailwind CSS 4 æ„å»ºçš„æ·±è‰²ç³»ç°ä»£ç•Œé¢ï¼Œé…åˆæµä½“åŠ¨ç”»ï¼Œæä¾›æè‡´çš„ä½¿ç”¨ä½“éªŒã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **å‰ç«¯**: [Vue.js 3](https://vuejs.org/) (Composition API) + [Vite](https://vitejs.dev/)
- **è·¯ç”±**: [Vue Router 5](https://router.vuejs.org/)
- **æ ·å¼**: [Tailwind CSS 4](https://tailwindcss.com/)
- **å›¾æ ‡**: [Lucide Vue Next](https://lucide.dev/)
- **åç«¯**: [Hono](https://hono.dev/) (é«˜æ€§èƒ½ Web æ¡†æ¶)
- **éƒ¨ç½²**: [Cloudflare Pages Functions](https://pages.cloudflare.com/)
- **å­˜å‚¨**: [Cloudflare D1](https://developers.cloudflare.com/d1/) (è¾¹ç¼˜ç«¯ SQLite)

## ğŸ¨ UI è®¾è®¡ç†å¿µ

é¡¹ç›®é‡‡ç”¨äº†ç°ä»£åŒ–çš„**æ·±è‰²ç»ç’ƒæ‹Ÿæ€ï¼ˆGlassmorphismï¼‰**è®¾è®¡é£æ ¼ï¼š

- **è‰²å½©æ–¹æ¡ˆ**ï¼šä»¥ `Slate-950` ä¸ºåº•è‰²ï¼Œæ­é… `Indigo` å’Œ `Violet` æ¸å˜è‰²ä½œä¸ºå“ç‰Œä¸»è‰²è°ƒã€‚
- **äº¤äº’åé¦ˆ**ï¼šè‡ªå®šä¹‰ `useModal` å¼¹çª—ç³»ç»Ÿï¼Œæä¾›å¹³æ»‘çš„å…¥åœºä¸é€€åœºåŠ¨ç”»ã€‚
- **å“åº”å¼**ï¼šå®Œç¾é€‚é…ç§»åŠ¨ç«¯ä¸æ¡Œé¢ç«¯ï¼Œç¡®ä¿åœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½æœ‰è‰¯å¥½çš„è§†è§‰å‘ˆç°ã€‚

## ğŸ”’ å®‰å…¨æœºåˆ¶

- **JWT è®¤è¯**ï¼šåŸºäº JSON Web Token çš„æ— çŠ¶æ€èº«ä»½éªŒè¯ï¼Œç¡®ä¿æ¥å£è°ƒç”¨çš„å®‰å…¨æ€§ã€‚
- **èº«ä»½é‰´æƒä¸­é—´ä»¶**ï¼šåç«¯é€šè¿‡ Hono ä¸­é—´ä»¶å¯¹ Admin å’Œæ™®é€šç”¨æˆ·è¿›è¡Œä¸¥æ ¼çš„è·¯ç”±çº§è®¿é—®æ§åˆ¶ã€‚
- **å¯†ç åŠ å¯†**ï¼šç”¨æˆ·å¯†ç åœ¨æ•°æ®åº“ä¸­å®‰å…¨å­˜å‚¨ã€‚

## ğŸš€ æœ¬åœ°è¿è¡ŒæŒ‡å—

### 1. å…‹éš†ä¸å®‰è£…

```bash
git clone <repository-url>
cd GiftFlow
npm install
```

### 2. æœ¬åœ°æ•°æ®åº“åˆå§‹åŒ–

è¿è¡Œè¿ç§»æ–‡ä»¶ä»¥åˆ›å»ºæœ¬åœ° D1 æ•°æ®åº“ï¼š

```bash
npx wrangler d1 migrations apply giftflow --local
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

å¯åŠ¨å…¨æ ˆå¼€å‘ç¯å¢ƒï¼ˆåŒæ—¶è¿è¡Œ Vite å‰ç«¯å’Œ Wrangler Pages åç«¯ä»£ç†ï¼‰ï¼š

```bash
npm run pages:dev
```

- å‰ç«¯åœ°å€ï¼š`http://localhost:5173`
- åç«¯ APIï¼šé€šè¿‡ `localhost:8788` ä»£ç†è½¬å‘

### 4. åˆå§‹åŒ–ç®¡ç†å‘˜

åœ¨æœ¬åœ° D1 æ•°æ®åº“ä¸­æ’å…¥ç®¡ç†å‘˜è´¦å·ï¼š

```bash
npx wrangler d1 execute giftflow --local --command="INSERT INTO users (username, password, is_admin) VALUES ('admin', '1313ljjmtdsxxx', 1);"
```

---

## ğŸŒ çº¿ä¸Šéƒ¨ç½²æŒ‡å—

### 1. é…ç½® `wrangler.toml`

å°†æ‚¨çš„ D1 `database_id` å¡«å…¥ `wrangler.toml`ï¼š

```toml
[[d1_databases]]
binding = "DB"
database_name = "giftflow"
database_id = "your-d1-id-here"
```

### 2. çº¿ä¸Šæ•°æ®åº“åŒæ­¥

```bash
npx wrangler d1 migrations apply giftflow --remote
```

### 3. æ„å»ºä¸éƒ¨ç½²

```bash
npm run deploy
```

---

## ğŸ“‚ æ ¸å¿ƒæ¶æ„

```text
â”œâ”€â”€ functions/api/         # åç«¯é€»è¾‘
â”‚   â””â”€â”€ [[route]].ts       # Hono API è·¯ç”±å®šä¹‰ä¸æ§åˆ¶å™¨
â”œâ”€â”€ migrations/            # æ•°æ®åº“ Schema (D1 Migrations)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ views/             # è§†å›¾ç»„ä»¶ (Home ä¸ºæ ¸å¿ƒç®¡ç†/å‚ä¸ç•Œé¢)
â”‚   â”œâ”€â”€ useModal.ts        # å…¨å±€å¼¹çª—çŠ¶æ€ç®¡ç† Hook
â”‚   â”œâ”€â”€ style.css          # Tailwind 4 æŒ‡ä»¤ä¸è‡ªå®šä¹‰åŠ¨ç”»
â”‚   â””â”€â”€ api.ts             # å°è£… Axios è¯·æ±‚æ‹¦æˆªå™¨
â””â”€â”€ wrangler.toml          # Cloudflare ç¯å¢ƒé…ç½®
```

## ğŸ› ï¸ åç«¯ä¸»è¦æ¥å£

| è·¯å¾„                      | æ–¹æ³• | æè¿°                         | æƒé™   |
| :------------------------ | :--- | :--------------------------- | :----- |
| `/auth/login`             | POST | ç”¨æˆ·ç™»å½•                     | å…¬å¼€   |
| `/status`                 | GET  | è·å–å½“å‰ç”¨æˆ·çŠ¶æ€ã€åˆ†ç»„ä¿¡æ¯   | éœ€ç™»å½• |
| `/admin/draw/:id`         | POST | å¼€å¯æŒ‡å®šå°ç»„æŠ½å¥–             | ç®¡ç†å‘˜ |
| `/admin/draw-results/:id` | GET  | æŸ¥çœ‹å°ç»„å§“åé…å¯¹ç»“æœ         | ç®¡ç†å‘˜ |
| `/my-gift`                | GET  | è·å–è‡ªå·±éœ€è¦èµ é€çš„æ”¶ä»¶äººä¿¡æ¯ | æˆå‘˜   |

## ğŸ“ è®¸å¯è¯

MIT License

